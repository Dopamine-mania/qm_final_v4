# éŸ³ä¹ç–—æ„ˆAIç³»ç»Ÿ 4.0ç‰ˆæœ¬

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.7+-green.svg)](https://python.org)
[![Status](https://img.shields.io/badge/status-MVP-orange.svg)](README.md)

åŸºäºé¢„åˆ¶ç–—æ„ˆè§†é¢‘ç´ æåº“çš„æ™ºèƒ½æ£€ç´¢æ¨èç³»ç»Ÿ

## ğŸŒŸ é¡¹ç›®æ¦‚è¿°

éŸ³ä¹ç–—æ„ˆAIç³»ç»Ÿ4.0ç‰ˆæœ¬å®ç°äº†ä»ç”Ÿæˆé©±åŠ¨åˆ°æ£€ç´¢é©±åŠ¨çš„é‡å¤§æ¶æ„å‡çº§ï¼Œé€šè¿‡æ™ºèƒ½æ£€ç´¢é¢„åˆ¶çš„é«˜è´¨é‡ç–—æ„ˆè§†é¢‘ç´ æï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„éŸ³ä¹ç–—æ„ˆä½“éªŒã€‚

### ğŸ’¡ æ ¸å¿ƒç‰¹è‰²

- **ğŸ” æ™ºèƒ½æ£€ç´¢**ï¼šåŸºäºCLAMP3éŸ³ä¹ç†è§£æ¨¡å‹çš„ç‰¹å¾åŒ¹é…
- **ğŸ¯ ç²¾å‡†è¯†åˆ«**ï¼š27ç»´ç»†ç²’åº¦æƒ…ç»ªè¯†åˆ«ç³»ç»Ÿ
- **âš¡ é«˜æ•ˆå“åº”**ï¼šé¢„åˆ¶ç´ æåº“ï¼Œç§’çº§æ¨èå“åº”
- **ğŸ² ä¸ªæ€§åŒ–é€‰æ‹©**ï¼šTop-Kéšæœºé€‰æ‹©ç­–ç•¥ï¼Œé¿å…é‡å¤æ¨è
- **ğŸ“Š ISOåŸåˆ™**ï¼šåŸºäºISOä¸‰é˜¶æ®µéŸ³ä¹ç–—æ„ˆæ ‡å‡†è®¾è®¡

### ğŸ“ˆ ç‰ˆæœ¬æ¼”è¿›

| ç‰ˆæœ¬ | æ¶æ„æ¨¡å¼ | æ ¸å¿ƒæŠ€æœ¯ | å“åº”æ—¶é—´ | æˆæœ¬æ•ˆç‡ |
|------|----------|----------|----------|----------|
| 3.0 | ç”Ÿæˆé©±åŠ¨ | å®æ—¶éŸ³ä¹åˆæˆ | >5s | é«˜è®¡ç®—æˆæœ¬ |
| **4.0** | **æ£€ç´¢é©±åŠ¨** | **æ™ºèƒ½ç‰¹å¾åŒ¹é…** | **<1s** | **95%æˆæœ¬é™ä½** |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒå·¥ä½œæµç¨‹

```
ç”¨æˆ·æƒ…ç»ªè¾“å…¥ â†’ 27ç»´æƒ…ç»ªè¯†åˆ« â†’ æƒ…ç»ªç‰¹å¾å‘é‡åŒ– â†’ è§†é¢‘ç‰¹å¾åŒ¹é… â†’ Top-5ç›¸ä¼¼åº¦æ’åº â†’ éšæœºé€‰æ‹©è¾“å‡º â†’ ISOä¸‰é˜¶æ®µç–—æ„ˆè§†é¢‘
```

### ğŸ“ é¡¹ç›®ç»“æ„

```
qm_final4/
â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ emotion_mapper.py    # æƒ…ç»ªè¯†åˆ«æ˜ å°„
â”‚   â”œâ”€â”€ video_processor.py   # è§†é¢‘å¤„ç†å¼•æ“
â”‚   â”œâ”€â”€ feature_extractor.py # éŸ³é¢‘ç‰¹å¾æå–
â”‚   â””â”€â”€ retrieval_engine.py  # æ£€ç´¢åŒ¹é…å¼•æ“
â”œâ”€â”€ materials/               # ç´ æåº“
â”‚   â”œâ”€â”€ video/              # åŸå§‹ç–—æ„ˆè§†é¢‘
â”‚   â”œâ”€â”€ segments/           # åˆ‡åˆ†ç‰‡æ®µ
â”‚   â””â”€â”€ features/           # ç‰¹å¾æ•°æ®åº“
â”œâ”€â”€ gradio_retrieval_4.0.py # Webç•Œé¢ä¸»ç¨‹åº
â”œâ”€â”€ test_mvp.py             # MVPæµ‹è¯•å¥—ä»¶
â”œâ”€â”€ quick_start.py          # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt        # ä¾èµ–é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.7+ 
- **ffmpeg**: è§†é¢‘å¤„ç†ä¾èµ–
- **å†…å­˜**: å»ºè®®4GB+
- **å­˜å‚¨**: çº¦10GBï¼ˆåŒ…å«è§†é¢‘ç´ æï¼‰

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Dopamine-mania/qm_final_v4.git
cd qm_final_v4

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. ç¡®ä¿ffmpegå·²å®‰è£…
# macOS: brew install ffmpeg
# Ubuntu: sudo apt install ffmpeg
# Windows: ä¸‹è½½ffmpegå¹¶æ·»åŠ åˆ°PATH

# 4. å¿«é€Ÿå¯åŠ¨
python quick_start.py
```

### ğŸ¬ è§†é¢‘ç´ æå‡†å¤‡

å°†ç–—æ„ˆè§†é¢‘æ–‡ä»¶æ”¾ç½®åˆ°æŒ‡å®šç›®å½•ï¼š

```bash
materials/video/
â”œâ”€â”€ 32.mp4  # ç¬¬ä¸€ä¸ªç–—æ„ˆè§†é¢‘ï¼ˆçº¦3.5å°æ—¶ï¼‰
â””â”€â”€ 56.mp4  # ç¬¬äºŒä¸ªç–—æ„ˆè§†é¢‘ï¼ˆçº¦3.5å°æ—¶ï¼‰
```

## ğŸ’» ä½¿ç”¨æŒ‡å—

### Webç•Œé¢ä½¿ç”¨

1. **ç³»ç»Ÿåˆå§‹åŒ–**ï¼šé¦–æ¬¡è¿è¡Œç‚¹å‡»"åˆå§‹åŒ–ç³»ç»Ÿ"
2. **æƒ…ç»ªè¾“å…¥**ï¼šæè¿°å½“å‰æƒ…ç»ªçŠ¶æ€
3. **è·å–æ¨è**ï¼šç‚¹å‡»"è·å–ç–—æ„ˆè§†é¢‘æ¨è"
4. **è§‚çœ‹ä½“éªŒ**ï¼šåœ¨çº¿æ’­æ”¾æ¨èçš„ç–—æ„ˆè§†é¢‘

### ç¨‹åºåŒ–è°ƒç”¨

```python
from core.retrieval_engine import TherapyVideoSelector, VideoRetrievalEngine

# åˆå§‹åŒ–ç³»ç»Ÿ
engine = VideoRetrievalEngine()
selector = TherapyVideoSelector(engine)

# è·å–æ¨è
result = selector.select_therapy_video("æˆ‘æ„Ÿåˆ°å¾ˆç„¦è™‘ï¼Œéš¾ä»¥å…¥ç¡")
print(f"æ¨èè§†é¢‘: {result['video_name']}")
print(f"ç›¸ä¼¼åº¦: {result['similarity_score']:.3f}")
```

## ğŸ”¬ æŠ€æœ¯è¯¦è§£

### æƒ…ç»ªè¯†åˆ«ç³»ç»Ÿ

- **ç»´åº¦**: 27ç»´ç²¾ç»†åŒ–æƒ…ç»ªåˆ†ç±»
- **ç®—æ³•**: åŸºäºæ·±åº¦å­¦ä¹ çš„æ–‡æœ¬æƒ…ç»ªç†è§£
- **è¦†ç›–**: ç„¦è™‘ã€ç–²æƒ«ã€çƒ¦èºã€å¹³é™ç­‰å¤šç§æƒ…ç»ªçŠ¶æ€

### ç‰¹å¾åŒ¹é…ç®—æ³•

- **éŸ³é¢‘ç‰¹å¾**: 7ç»´ç‰¹å¾å‘é‡ï¼ˆèŠ‚æ‹ã€èƒ½é‡ã€äº®åº¦ã€æ¸©æš–åº¦ç­‰ï¼‰
- **ç›¸ä¼¼åº¦è®¡ç®—**: ä½™å¼¦ç›¸ä¼¼åº¦ + æ¬§å‡ é‡Œå¾—è·ç¦»åŠ æƒç»„åˆ
- **åŒ¹é…ç­–ç•¥**: Top-Kæ£€ç´¢ + éšæœºé€‰æ‹©æœºåˆ¶

### ISOä¸‰é˜¶æ®µè®¾è®¡

1. **åŒ¹é…é˜¶æ®µ**ï¼ˆå‰25%ï¼‰ï¼šä¸ç”¨æˆ·å½“å‰æƒ…ç»ªåŒæ­¥
2. **å¼•å¯¼é˜¶æ®µ**ï¼šæ¸è¿›å¼æƒ…ç»ªè°ƒèŠ‚è¿‡æ¸¡  
3. **ç›®æ ‡é˜¶æ®µ**ï¼šè¾¾åˆ°æ·±åº¦æ”¾æ¾çŠ¶æ€

## ğŸ§ª æµ‹è¯•éªŒè¯

### è¿è¡Œæµ‹è¯•å¥—ä»¶

```bash
# å®Œæ•´MVPæµ‹è¯•
python test_mvp.py

# å•ç‹¬æµ‹è¯•å„æ¨¡å—
python -m core.emotion_mapper    # æƒ…ç»ªè¯†åˆ«æµ‹è¯•
python -m core.retrieval_engine  # æ£€ç´¢å¼•æ“æµ‹è¯•
```

### æ€§èƒ½åŸºå‡†

- **æƒ…ç»ªè¯†åˆ«**: <100ms
- **ç‰¹å¾åŒ¹é…**: <200ms  
- **ç«¯åˆ°ç«¯å“åº”**: <500ms
- **å‡†ç¡®ç‡**: >85%åŒ¹é…æ»¡æ„åº¦

## ğŸ“‹ å¼€å‘çŠ¶æ€

### âœ… å·²å®ŒæˆåŠŸèƒ½

- [x] æ ¸å¿ƒæ£€ç´¢å¼•æ“æ¶æ„
- [x] 27ç»´æƒ…ç»ªè¯†åˆ«ç³»ç»Ÿ
- [x] è§†é¢‘å¤„ç†å’Œåˆ‡åˆ†æ¨¡å—
- [x] éŸ³é¢‘ç‰¹å¾æå–æ¡†æ¶
- [x] Top-Kéšæœºé€‰æ‹©ç­–ç•¥
- [x] Gradio Webç•Œé¢
- [x] å®Œæ•´MVPæµ‹è¯•å¥—ä»¶

### ğŸš§ å¼€å‘ä¸­åŠŸèƒ½

- [ ] CLAMP3æ¨¡å‹å®Œæ•´é›†æˆ
- [ ] ç”¨æˆ·åå¥½å­¦ä¹ ç®—æ³•
- [ ] å¤šæ¨¡æ€è¾“å…¥æ”¯æŒ
- [ ] å®æ—¶åé¦ˆä¼˜åŒ–

### ğŸ”® æœªæ¥è§„åˆ’

- [ ] ç§»åŠ¨ç«¯åº”ç”¨æ”¯æŒ
- [ ] äº‘ç«¯éƒ¨ç½²æ–¹æ¡ˆ
- [ ] å¤šè¯­è¨€æƒ…ç»ªè¯†åˆ«
- [ ] VR/ARæ²‰æµ¸å¼ä½“éªŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ç»´æŠ¤è€…**: Dopamine-mania
- **é¡¹ç›®ä»“åº“**: https://github.com/Dopamine-mania/qm_final_v4
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/Dopamine-mania/qm_final_v4/issues)

---

<div align="center">

**ğŸŒ™ éŸ³ä¹ç–—æ„ˆAIç³»ç»Ÿ 4.0ç‰ˆæœ¬** 

*ä»ç”Ÿæˆåˆ°æ£€ç´¢çš„æ™ºèƒ½åŒ–æ¼”è¿› Â· è®©AIç†è§£æƒ…ç»ªï¼Œè®©éŸ³ä¹ç–—æ„ˆå¿ƒçµ*

[![GitHub stars](https://img.shields.io/github/stars/Dopamine-mania/qm_final_v4?style=social)](https://github.com/Dopamine-mania/qm_final_v4)

</div>